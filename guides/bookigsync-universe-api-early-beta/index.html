<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>BookingSync API documentation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/stylesheets/application.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="/highlight.css">
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="/assets/javascripts/application.js"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.8.0">
  </head>
  <body class="flex-col">
    <div class="page-wrapper flex-1 flex-col">
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle sidebar-toggle collapsed" data-toggle="collapse" data-target="#navigation" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img alt="BookingSync" src="/images/bookingsync.svg">
              <span>Developers</span>
            </a>
          </div>

          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              <li class="active">
                <a href="/guides/">Guides</a>
              </li>
              <li class="">
                <a href="/reference/">API Reference</a>
              </li>
              <li><a href="https://www.bookingsync.com" target="_blank">BookingSync.com</a></li>
              <li><a href="https://github.com/BookingSync/bookingsync-api-docs" target="_blank"><i class="fa fa-github fa-fw fa-2x"></i></a></li>
            </ul>
          </div>
        </div>
      </nav>

<div class="container content">
  <div class="row">
    <div class="col-md-3 col-md-push-9">
      <div class="panel panel-default">
        <div class="list-group">
          <a class="list-group-item" href="/guides/">Introduction</a>
          <a class="list-group-item" href="/guides/create-a-booking-with-a-source">Create a Booking with a Source</a>
          <a class="list-group-item" href="/guides/read-all-authorized-accounts-at-once">Read all authorized accounts at once</a>
          <a class="list-group-item" href="/guides/getting-started-with-php">Getting Started with PHP</a>
          <a class="list-group-item" href="/guides/api-best-practices">API best practices</a>
          <a class="list-group-item" href="/guides/secure-payments-by-bookingsync">Secure Payments By BookingSync</a>
          <a class="list-group-item" href="/guides/webhook-subscriptions">Webhook subscriptions</a>
          <a class="list-group-item" href="/guides/oauth-scopes">OAuth scopes</a>
          <a class="list-group-item" href="/guides/bookigsync-universe-api-early-beta">BookingSync Universe API [EARLY BETA]</a>
          <a class="list-group-item" href="/guides/updated-since-flow">updated_since flow</a>
        </div>
      </div>
    </div>
    <div class="col-md-9 col-md-pull-3">
      <div class="panel panel-default">
        <div class="panel-body guide-body">
          <h2 id="bookingsync-universe-api-early-beta">BookingSync Universe API [Early Beta]</h2>

<ol id="markdown-toc">
  <li><a href="#preface">Preface</a></li>
  <li><a href="#how-it-works">How It Works</a></li>
  <li><a href="#examples-website-app---rentals-custom-schema">Examples: Website App - Rentals’ Custom Schema</a></li>
</ol>

<h3 id="preface">Preface</h3>

<p>Since BookingSync ecosystem is much more than the central application which exposes API v3 (count in all the applications available in the store!), it would be certainly useful to have the API access to those apps as well. That’s why we developed <strong>BookingSync Universe API</strong>  which allows you to use one token to access multiple applications, as long as it has the proper OAuth scopes!</p>

<h3 id="how-it-works">How It Works</h3>

<p>Each application defines certain scopes that allow you to access API, in the same way as it works for API v3. For your application to take advantage of BookingSync Universe API, you merely need to request those scopes during the authorization process, and that’s it! You can use the same OAuth scope to access both API v3 and APIs of the applications!</p>

<h3 id="examples-website-app---rentals-custom-schema">Examples: Website App - Rentals’ Custom Schema</h3>

<p>Currently, Website app offers limited support for BookingSync Universe API in its <code>/rentals</code> and <code>/websites</code> endpoints.  The API is fully <a href="http://jsonapi.org">JSONAPI 1.0 compliant</a>, which is a different format than the one for API v3.</p>

<p>The API is accessible under the following domain: https://website.apps.bookingsync.com/api/admin/v1 and defines two sets of scopes:</p>

<ol>
  <li>Read/Write scopes for websites:</li>
</ol>

<ul>
  <li>__website__websites_read</li>
  <li>__website__websites_write</li>
</ul>

<ol>
  <li>Read/Write scopes for rentals:</li>
</ol>

<ul>
  <li>__website__rentals_read</li>
  <li>__website__rentals_write</li>
</ul>

<p>To manage the custom schema for rentals and websites, you will need first to define the schema on website level, under <code>rentals-custom-data-schema</code> attribute. It is supposed to be a simple JSON field (key-value store), with attribute names as keys and types as values. You can use the following types: <code>string</code>, <code>integer</code> and <code>big_decimal</code>.</p>

<p>Here is an example request how to define custom schema for rentals:</p>

<pre><code>curl --header 'Authorization: Bearer YOUR_TOKEN' --header 'Content-Type: application/vnd.api+json' --request PUT --data '{ "data": { "id": 1, "type": "websites", "attributes": { "rentals-custom-data-schema": { "pool_size": "string" } } } }' https://website.apps.bookingsync.com/api/admin/v1/websites/1
</code></pre>

<p>Now that the schema is defined, you can persist those attribute on rentals, which can be done under <code>custom-attributes</code> JSON field, which is a key-value store as well with attribute names as keys and their values as the values of the hash.</p>

<p>Here is an example request how to define store custom attributes on rentals:</p>

<pre><code>curl --header 'Authorization: Bearer YOUR_TOKEN' --header 'Content-Type: application/vnd.api+json' --request PUT --data '{ "data": { "id": 1, "type": "rentals", "attributes": { "custom-attributes": { "pool_size": "15x5" } } } }' https://website.apps.bookingsync.com/api/admin/v1/rentals/1
</code></pre>

        </div>
      </div>
    </div>
  </div>
</div>
    </div>
  </body>
</html>

